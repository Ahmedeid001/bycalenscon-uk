"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[236,5775],{5775:function(e,t,n){n.r(t),n.d(t,{ControlQuantity:function(){return d}});var r=n(85893),i=n(88005),s=n(14348),o=n(55327),a=n(95086),u=n(86010),c=n(76248),d=function(e){var t=e.disableIncrement,n=(0,o.Fg)(function(e){return e.theme})===o.hN.nue,d=(0,a.M)(function(e){return{quantity:e.quantity,setQuantity:e.setQuantity}},c.Z),l=d.quantity,p=d.setQuantity;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{className:(0,u.Z)("quantity_btn p-2 bg-gray-50 border me-2 rounded-md active:bg-gray-200 hover:bg-gray-100",{"border border-black":n}),type:"button",disabled:t,onClick:function(){return p(l+1)},children:(0,r.jsx)(i.Z,{className:"w-4 h-4 text-gray-900"})}),(0,r.jsx)("p",{className:"m-0 self-center w-6 text-center",children:l}),(0,r.jsx)("button",{type:"button",className:(0,u.Z)("quantity_btn p-2  bg-gray-50 border mx-2 rounded-md active:bg-gray-200 hover:bg-gray-100",{"border border-black":n}),onClick:function(){return p(Math.max(1,l-1))},children:(0,r.jsx)(s.Z,{className:"w-4 h-4 text-gray-900"})})]})}},30236:function(e,t,n){n.r(t),n.d(t,{InProductCheckout:function(){return el}});var r=n(47568),i=n(26042),s=n(69396),o=n(20414),a=n(85893),u=n(92245),c=n(76254),d=n(12052),l=n(86097),p=n(65369),f=n(57813),h=n(5775),m=n(7607),_=n(22195),b=n(2973),g=n(82820),y=n(27561),v=n(56526),x=n(3374),k=n(38522),j=n(49129),Z=n(21617),N=n(89667),w=n(63549),C=n(18598),S=n(38591),P=n(44758),I=n(8982),O=n(36442),q=n(67819),F=n(95086),E=n(38319),D=n(85463),R=n(70938),A=n(21763),M=n(81723),Q=n(86107),T=n(55327),V=n(41777),G=n(72516),K=n(4387),J=n(86010),L=n(36808),B=n.n(L),z=n(5152),U=n.n(z),W=n(11163),H=n(67294),X=n(87536),$=n(86501),Y=n(76248),ee=n(8705),et=n(90760),en=n(38780),er=n(3555),ei=n(27398),es=U()(function(){return n.e(6761).then(n.bind(n,77809)).then(function(e){return e.DiscountCoupon})},{loadableGenerated:{webpack:function(){return[77809]}},ssr:!1}),eo=U()(function(){return n.e(8339).then(n.bind(n,68339)).then(function(e){return e.ControlQuantityClear})},{loadableGenerated:{webpack:function(){return[68339]}},ssr:!1}),ea=U()(function(){return n.e(3771).then(n.bind(n,3771)).then(function(e){return e.ControlQuantityShine})},{loadableGenerated:{webpack:function(){return[3771]}},ssr:!1}),eu=U()(function(){return n.e(6505).then(n.bind(n,66505)).then(function(e){return e.SphinxProductFormTitle})},{loadableGenerated:{webpack:function(){return[66505]}}}),ec=U()(function(){return n.e(428).then(n.bind(n,90428)).then(function(e){return e.SphinxInfoIcon})},{loadableGenerated:{webpack:function(){return[90428]}}}),ed=U()(function(){return n.e(583).then(n.bind(n,70583)).then(function(e){return e.ControlQuantityElegance})},{loadableGenerated:{webpack:function(){return[70583]}}}),el=(0,H.forwardRef)(function(e,t){var n,L,z=e.checkoutMessage,U=e.formRef,el=e.productData,ep=e.canSubmit,ef=e.total,eh=e.product,em=e.custom_price,e_=e.hideQuantity,eb=e.onCheckoutWithUpsell,eg=e.setIsCheckoutLoading,ey=e.isCheckoutLoading,ev=e.isOutOfStock,ex=e.isFunnel,ek=e.funnelId,ej=e.isPaymentError,eZ=(0,H.useState)(null);eZ[0],eZ[1];var eN=(0,H.useState)(!1);eN[0],eN[1],(0,H.useRef)(null);var ew,eC=(0,W.useRouter)(),eS=(0,T.Fg)(function(e){return e.id}),eP=(0,T.Fg)(function(e){return e.theme}),eI=eP===T.hN.clear,eO=eP===T.hN.shine,eq=eP===T.hN.sphinx,eF=eP===T.hN.default,eE=eP===T.hN.fasty,eD=(0,T.Fg)(function(e){return e.max_order_items}),eR=(0,A.J)(function(e){return e.guestId}),eA=(0,A.J)(function(e){return e.currencyId}),eM=(0,A.J)(function(e){return e.referralCode}),eQ=(0,C.k)(function(e){return e.trackInitiateCheckoutEvent}),eT=(0,C.k)(function(e){return e.trackMissedOrderEvent}),eV=(0,X.cI)({mode:"onChange"}),eG=(0,F.M)(function(e){return e.selectedUpsell}),eK=(0,F.M)(function(e){return e.utms}),eJ=(0,M.K)(function(e){return e.selectedPaymentMethod}),eL=(0,M.K)(function(e){return e.transferReceiptUrl}),eB=(0,M.K)(function(e){return e.transferReceiptTransactionNumber}),ez=(0,M.K)(function(e){return e.isPaymentMethodChangesPrice}),eU=(0,M.K)(function(e){return e.calculatePaymentPriceChange}),eW=(0,Q.N)(function(e){return e.isSpamBlock}),eH=(0,T.Fg)(function(e){return e.shipping_cost}),eX=(0,F.M)(function(e){return e.quantity}),e$=(0,E.Vw)(),eY=(0,b.R)(),e0=(0,O.$)(),e2=(0,Z.o)(null==eh?void 0:eh.custom_currency),e5=(0,G.j)(),e1=(0,R.x)(function(e){return e.isFreeShipping}),e7=(0,V.S)(function(e){return e.setIsCheckoutFormDirty}),e6=(0,D.G)(function(e){return{isCouponApplied:e.isCouponApplied,discount:e.discount,couponCode:e.couponCode}},Y.Z),e8=e6.isCouponApplied,e3=e6.discount,e4=e6.couponCode,e9=(0,S.h)(function(e){return e.userInputVariations}),te=(0,w.N)(function(e){return{sendOtpRequest:e.sendOtpRequest,isOtpSuccess:e.isOtpSuccess,setIsOtpSuccess:e.setIsOtpSuccess}},Y.Z),tt=te.sendOtpRequest,tn=te.isOtpSuccess,tr=te.setIsOtpSuccess,ti=(0,N.E)(eS).isConfirmOrderWithOtpActive,ts=(0,er.F)(),to=ts.selectedShippingOptionPrice,ta=ts.selectedShippingOptionName;(0,H.useEffect)(function(){if(tn){var e,n;null==U||null===(e=U.current)||void 0===e||e.click(),t&&"function"!=typeof t&&ex&&(null===(n=t.current)||void 0===n||n.requestSubmit())}},[U,tn,tr]),(0,H.useEffect)(function(){eV.formState.isDirty&&eQ(eS,e5)},[eV.formState.isDirty]),(0,H.useEffect)(function(){eV.formState.isDirty&&e7(!0)},[eV.formState.isDirty]);var tu=(ew=(0,r.Z)(function(e){var t,n,r,a,d,h,m,_,b,v,j,Z,N,w,C,S,O;return(0,o.__generator)(this,function(o){switch(o.label){case 0:if(!ep())return e.phone&&((0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"validation_error"},(0,P.t)((0,s.Z)((0,i.Z)({},e),{curId:eA})),eK)),eT(eS,e5)),[2];if(eJ===l.I.TransferReceipt){if(!eB)return $.ZP.error(e0("please-enter-transaction-number")),(t=document.querySelector("#transfer-receipt-upload"))&&t.scrollIntoView({block:"center",behavior:"smooth"}),[2];if(!eL)return $.ZP.error(e0("please-upload-transfer-receipt")),(n=document.querySelector("#transfer-receipt-upload"))&&n.scrollIntoView({block:"center",behavior:"smooth"}),[2]}if(a=(null==eh?void 0:eh.is_digital)?0:null!==(r=null!=to?to:e1?0:null==e$?void 0:e$.shipping_cost)&&void 0!==r?r:eH,d=ef*eX,h=e3>0&&e8?e3:0,m=d+a-h,!(_=(0,s.Z)((0,i.Z)((0,s.Z)((0,i.Z)((0,s.Z)((0,i.Z)({},el,e),{curId:eA,cart_metadata:e9,custom_price:em,custom_currency:eh.custom_currency,coupon_code:e8?e4:void 0,payment_method:eJ||l.I.COD}),eK),{pixel_price:eh.pixel_price}),ek&&{funnel_id:ek},ez&&{custom_total_price:eU(m)}),{metadata:(0,i.Z)({},eM&&{referral_code:eM},ta&&{shipping_option_name:ta},eL&&{transfer_receipt:eL},eB&&{transfer_receipt_transaction_number:eB},!!(eh.ab_test_id&&eh.ab_test_variant_id)&&{ab_test_id:eh.ab_test_id,ab_test_variant_id:eh.ab_test_variant_id})})).phone||ey)return[2];eg(!0),b="";try{b=(0,k.get_user_data)()}catch(j){console.log("error generating nonce",j),(0,q.g)({level:"error",message:"generate_captcha_token_error",error:String(j),service:"checkout",url:window.location.href,ua:window.navigator.userAgent}),b=(0,x.SN)()}o.label=1;case 1:if(o.trys.push([1,13,14,15]),e2)return $.ZP.success(e0("your-order-has-been-placed")),(0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"vpn_block"},(0,P.t)(_))),eT(eS,e5),[2,eC.push("/thanks")];if(!eW)return[3,5];if(v=(v=_.phone).split(" ").join(""),v=(0,f.TL)(v),!(0,K.SR)(v,{regionCode:I.r[e5]}).valid)return $.ZP.success(e0("your-order-has-been-placed")),(0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"invalid_phone_number"},(0,P.t)(_))),eT(eS,e5),[2,eC.push("/thanks")];o.label=2;case 2:return o.trys.push([2,4,,5]),[4,p.N.post("track-pixel/track",{name:_.full_name,address:_.address})];case 3:return o.sent(),[3,5];case 4:return o.sent(),$.ZP.success(e0("your-order-has-been-placed")),(0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"invalid_name_or_address"},(0,P.t)(_))),eT(eS,e5),[2,eC.push("/thanks")];case 5:if(ti&&!tn)return Z=(Z=_.phone).split(" ").join(""),Z=(0,f.TL)(Z),(0,K.SR)(Z,{regionCode:I.r[e5]}).valid?(eg(!0),tt(_.phone,I.r[e5],eS,{limitExceeded:e0("otp-limit-exceeded"),blockedPhone:e0("blocked-number")})):$.ZP.error(e0("please-enter-valid-phone-number")),[2];if(!eG)return[3,7];return[4,eb(_,b)];case 6:return o.sent(),[2];case 7:return _.city&&(_.is_taager_shipping=!0,_.taager_shipping_cost=_.city.shipping_cost,_.government=_.city.name),e1&&(_.is_taager_shipping=!0,_.taager_shipping_cost=0),to&&(_.is_taager_shipping=!0,_.taager_shipping_cost=to),[4,(0,g.HP)(_,e5,b)];case 8:return(w=o.sent()).status===y.iF.SPAM_BLOCK&&((0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"validation_error"},(0,P.t)(_),eK)),eT(eS,e5)),(0,c.Q)({store_id:eS,guest_id:eR,name:u.S.purchaseProduct,user_agent:(0,x.g_)(window.navigator.userAgent),ref:document.referrer,product_id:eh.id,product_name:eh.name,order_id:w.id,value:w.total_cost,ad_id:B().get("ad_id")}),$.ZP.success(e0("your-order-has-been-placed")),tr(!1),[4,(0,g.Vc)(w.id)];case 9:if(!((null==(C=o.sent())?void 0:C.length)>0))return[3,10];return eC.push("/cross-selling/".concat(w.id).concat(ex?"?is_funnel=true":"")),[3,12];case 10:return[4,eY(w,ex)];case 11:o.sent(),o.label=12;case 12:return[3,15];case 13:return S=o.sent(),$.ZP.error(e0("you-have-reached-max-order")),(null===(O=S.response)||void 0===O?void 0:O.status)===429&&((0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"max_order_reached"},(0,P.t)(_),eK)),eT(eS,e5)),[3,15];case 14:return eg(!1),[7];case 15:return[2]}})}),function(e){return ew.apply(this,arguments)}),tc=function(){var e=eV.getValues();e.phone&&((0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"validation_error"},(0,P.t)((0,s.Z)((0,i.Z)({},e),{curId:eA})),eK)),eT(eS,e5))},td=function(){var e=eV.getValues();e.phone&&((0,g.fh)((0,i.Z)({store_id:eS,products:[eh.name],reason:"otp_verify_failed"},(0,P.t)((0,s.Z)((0,i.Z)({},e),{curId:eA})),eK)),eT(eS,e5))},tl=function(e,t){if(eD&&eD>0&&eX>=eD)return!0;if(null==e?void 0:e.disable_orders_for_no_stock){if(t.variant_id){var n,r,i,s=null==e?void 0:null===(r=e.variants)||void 0===r?void 0:r.find(function(e){return e.id===t.variant_id});return(null!==(i=null==s?void 0:s.quantity)&&void 0!==i?i:0)<=eX}return(null!==(n=null==e?void 0:e.quantity)&&void 0!==n?n:0)<=eX}return!1};return(0,a.jsxs)("div",{className:(0,J.Z)("product_form_checkout mt-6",{"bg-white !p-4 rounded-md":eE,"relative bg-[#F7F7FA] rounded-[14px] md:rounded-[20px] !px-5 !pt-6 !pb-8 md:!px-8 md:!pt-8 md:!pb-[50px]":eF,"border border-gray-300 shadow-sm !p-4 md:!p-6":eI||eO,rounded:eO,"!p-4 md:!p-5 border border-[#E2E2E2] rounded-2xl shadow-[0px_30.02px_63.78px_0px_rgba(102,127,168,0.07)]":eq,"w-full":ex}),children:[eF&&(0,a.jsx)(ei.N,{}),eq?(0,a.jsx)(eu,{title:e0("please-fill-your-information"),icon:(0,a.jsx)(ec,{className:"text-skin-primary w-5 h-5 md:w-6 md:h-6"})}):(0,a.jsx)("p",{className:(0,J.Z)("text-lg font-bold",{"mb-6 md:mb-8":eF&&e_}),children:e0("please-fill-your-information")}),(0,a.jsxs)("form",{onSubmit:eV.handleSubmit(tu,tc),ref:t,children:[!e_&&(0,a.jsxs)("div",{className:"in-product-quantity-counter my-4",children:[(0,a.jsx)("label",{htmlFor:"quantity",className:"block text-sm font-medium text-gray-700",children:e0("items-count")}),(0,a.jsx)("div",{className:"quantity_container mt-2 flex",children:eI?(0,a.jsx)(eo,{disableIncrement:tl(eh,el)}):eO?(0,a.jsx)(ea,{isIncreaseButtonDisabled:tl(eh,el)}):eF?(0,a.jsx)(ed,{isIncreaseButtonDisabled:tl(eh,el)}):(0,a.jsx)(h.ControlQuantity,{disableIncrement:tl(eh,el)})})]}),(0,a.jsx)(m.D,(0,s.Z)((0,i.Z)({},eV),{isTaagerProduct:eh.is_taager_submit_active,isEcomboProduct:eh.is_ecombo_submit_active,isMosaweqProduct:eh.is_mosaweq_submit_active,isAlturkyProduct:eh.is_alturky_submit_active,isAngaznyProduct:eh.drop_shipping_provider===ee.O.Angazny,isJamaykaProduct:eh.is_jamaica_submit_active,isDropeProduct:eh.drop_shipping_provider===ee.O.Drope,isTajercodProduct:eh.drop_shipping_provider===ee.O.Tajercod})),!eh.is_digital&&(0,a.jsx)(en.J,{isFunnel:ex}),!eh.is_digital&&(0,a.jsxs)("div",{className:"shipping_cost_container my-4 flex items-center justify-between text-base",children:[(0,a.jsx)("dt",{className:"text-gray-600",children:e0("shipping-cost")}),(0,a.jsx)(_.d,{})]}),(0,a.jsx)(es,{total:ef*eX,products:[{product_id:eh.id,quantity:eX,price:ef},]}),(0,a.jsx)(d.A,{isFunnel:ex,isHideCod:null==eh?void 0:eh.is_digital},eh.id),!ex&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:(0,J.Z)("total_price_container mt-2 flex items-center justify-between",{"my-5 md:my-6":eq||eF}),children:[(0,a.jsx)("dt",{className:(0,J.Z)("text-gray-600",{"line-through":e3>0&&e8}),children:e0("total")}),(0,a.jsxs)("dd",{className:(0,J.Z)("total_price font-bold flex items-center gap-0.5",{"line-through":e3>0&&e8}),children:[eU(ef*eX+((null==eh?void 0:eh.is_digital)?0:null!==(n=null!=to?to:e1?0:null==e$?void 0:e$.shipping_cost)&&void 0!==n?n:eH))," ",(0,a.jsx)(et.X,{currency:e5,className:(0,J.Z)({"w-5 h-5":!e8})})]})]}),e3>0&&e8&&(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,a.jsx)("dt",{className:"text-gray-600",children:e0("total-after-discount")}),(0,a.jsxs)("dd",{className:"text-xl font-bold flex items-center gap-0.5",children:[eU(ef*eX+((null==eh?void 0:eh.is_digital)?0:null!==(L=null!=to?to:e1?0:null==e$?void 0:e$.shipping_cost)&&void 0!==L?L:eH)-e3),(0,a.jsx)(et.X,{currency:e5,className:"w-5 h-5"})]})]})]}),(0,a.jsx)(j.Q,{onVerifyFailed:td}),!ex&&(0,a.jsx)(v.z,{disabled:ey||ev||ej,className:(0,J.Z)("form_checkout_btn mt-2",{"!font-bold":eF}),type:"submit",ref:U,label:z||e0("buy-now"),fullWidth:!0})]})]})})}}]);