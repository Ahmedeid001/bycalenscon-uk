"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4987],{27398:function(e,n,t){t.d(n,{N:function(){return i}});var r=t(85893),i=function(){return(0,r.jsx)("svg",{className:"absolute inset-0 w-full h-full pointer-events-none","aria-hidden":"true",children:(0,r.jsx)("rect",{x:"0.5",y:"0.5",width:"calc(100% - 1px)",height:"calc(100% - 1px)",rx:"20",fill:"none",stroke:"currentColor",strokeWidth:"1",strokeDasharray:"6 6"})})}},12052:function(e,n,t){t.d(n,{A:function(){return N}});var r=t(85893),i=t(67294),o=t(36492),a=t(58853),s=t(55327),c=function(){var e=(0,s.Fg)(function(e){return e.id}),n=(0,o.a)(["paymentMethods"],function(){return a.W.get("store-payment-methods/active/".concat(e))},{retry:!1,refetchOnWindowFocus:!1,enabled:!!e}),t=n.data,r=n.isLoading;return n.isError||r?[]:(null==t?void 0:t.data)||[]},d=t(86010),l=t(5152),u=t.n(l),p=t(81723),m=t(76248),f=t(86097),h=t(95172),y=t(36442),b=t(11163),x=t(65326),g=u()(function(){return t.e(6505).then(t.bind(t,66505)).then(function(e){return e.SphinxProductFormTitle})},{loadableGenerated:{webpack:function(){return[66505]}}}),v=u()(function(){return t.e(3974).then(t.bind(t,23974)).then(function(e){return e.CardPosSphinx})},{loadableGenerated:{webpack:function(){return[23974]}}}),k=u()(function(){return t.e(5208).then(t.bind(t,35208)).then(function(e){return e.CheckboxSphinx})},{loadableGenerated:{webpack:function(){return[35208]}}}),w=u()(function(){return t.e(1569).then(t.bind(t,51569)).then(function(e){return e.PaymentCardElegance})},{loadableGenerated:{webpack:function(){return[51569]}}}),j=u()(function(){return t.e(3809).then(t.bind(t,43809)).then(function(e){return e.UploadReceipt})},{loadableGenerated:{webpack:function(){return[43809]}}}),N=function(e){var n,t=e.isFunnel,o=e.isHideCod,a=(0,b.useRouter)().query,l=(0,s.Fg)(function(e){return e.theme}),u=l===s.hN.luxify,N=l===s.hN.nue,_=l===s.hN.clear,C=l===s.hN.sphinx,O=l===s.hN.default,E=c(),Z=(0,y.$)(),F=(0,p.K)(function(e){return{selectedPaymentMethod:e.selectedPaymentMethod,setSelectedPaymentMethod:e.setSelectedPaymentMethod}},m.Z),P=F.selectedPaymentMethod,S=F.setSelectedPaymentMethod,A=(0,p.K)(function(e){return e.setPaymentMethodPriceChange}),I=function(e){if("tabby"===e&&(null==a?void 0:a.payment_error_message))switch(null==a?void 0:a.payment_error_message){case"not_available":default:return Z("tabby-not_available");case"order_amount_too_high":return Z("tabby-order_amount_too_high");case"order_amount_too_low":return Z("tabby-order_amount_too_low")}return null};return((0,i.useEffect)(function(){E.length&&!P&&(S(E[0].key),A(E[0]))},[E,P,A,S,]),E.length)?(0,r.jsxs)("div",{className:"mt-2",children:[C?(0,r.jsx)(g,{title:Z("choose-payment-method"),icon:(0,r.jsx)(v,{className:"text-skin-primary w-5 h-5 md:w-6 md:h-6"}),className:"mt-5 md:mt-6"}):(0,r.jsx)("span",{className:(0,d.Z)("text-lg font-bold text-gray-700",{"block my-6 md:my-8":O}),children:Z("choose-payment-method")}),(0,r.jsx)("div",{className:(0,d.Z)("payments_container mt-2 flex flex-col space-y-2",{"mt-5 md:mt-6 space-y-3 md:space-y-4":C,"mt-4 md:mt-5 space-y-4 md:space-y-5":O}),children:E.filter(function(e){return!(o&&e.key===f.I.COD)}).map(function(e){return O?(0,r.jsx)(w,{paymentMethod:e,selected:P===e.key,onClick:function(){S(e.key),A(e)},errorMessage:(null==a?void 0:a.payment_error_message)&&(null==a?void 0:a.payment_error_method)===e.key&&null!==(n=I(e.key))&&void 0!==n?n:void 0},e.key):(0,r.jsxs)("button",{type:"button",className:(0,d.Z)("payment_card flex cursor-pointer w-full items-center  p-1 transition duration-300 ease-in-out ",{"rounded-md border-2 border-gray-200 hover:border-blue-300":!u&&!N,"border-blue-600 hover:border-blue-600":P===e.key&&!u&&!N,"rounded-2xl border-2  border-black shadow-[4px_4px] duration-300 ease-in-out focus:border-black focus:shadow-[6px_6px] focus:shadow-[#87CEEB] focus:ring-black sm:text-sm":N,"rounded-none border-[0.5px] hover:border-skin-primary":_,"!border-skin-primary":P===e.key&&_,"shadow-[#87CEEB]":P===e.key&&N,"rounded-xl border-2 hover:border-black ":u,"border-black focus:border-black focus:ring-black":P===e.key&&u,"bg-white":t,"!border border-[#E2E2E2] !rounded-[14px] hover:!border-skin-primary !p-[14px] md:!p-4":C,"!border-skin-primary !p-[14px] md:!p-4":C&&P===e.key&&C}),onClick:function(){S(e.key),A(e)},children:[C?(0,r.jsx)(k,{selected:P===e.key,className:"!w-5 !h-5 me-2 md:me-4 ms-2"}):(0,r.jsx)("div",{className:"radio_container flex h-6 w-6 items-center justify-center rounded-full border border-gray-200 me-2",children:(0,r.jsx)("div",{className:(0,d.Z)("radio_circle h-4 w-4 rounded-full bg-gray-200 transition-colors duration-300 ease-in-out",{"bg-blue-500":P===e.key&&!u&&!N,"bg-[#87CEEB]":P===e.key&&N,"bg-black/70":P===e.key&&u,"bg-skin-primary/70":P===e.key&&_})})}),(0,r.jsxs)("div",{className:(0,d.Z)("payment_card_content flex w-full flex-col",{"justify-center items-center":C}),children:[(0,r.jsx)("span",{className:(0,d.Z)("payment_card_name w-fit text-base font-bold text-gray-600",{"text-[#010101]":C}),children:e.name}),(0,r.jsx)("span",{className:(0,d.Z)("payment_card_description w-fit text-sm text-gray-500",{"text-[#778399] mt-1":C}),children:e.description}),(null==a?void 0:a.payment_error_message)&&(null==a?void 0:a.payment_error_method)===e.key&&(0,r.jsx)("span",{className:"payment_card_error my-2 text-sm text-red-500 bg-red-100 p-2 rounded-md",children:I(e.key)}),e.key!==f.I.COD&&(0,r.jsx)("div",{className:(0,d.Z)("payment_card_img_container  mt-3",{"mt-1.5 md:mt-3":C}),children:(0,r.jsx)(x.Ee,{src:e.icon,alt:e.name,className:"payment_card_img w-full items-center object-contain me-2 [&>img]:h-14"})}),e.key===f.I.TransferReceipt&&P===f.I.TransferReceipt&&(0,r.jsx)(j,{})]})]},e.key)})}),(0,r.jsx)(h.Z,{})]}):null}},95172:function(e,n,t){t.d(n,{Z:function(){return u}});var r=t(85893),i=t(27302),o=t(81723),a=t(76248),s=t(56526),c=t(15116),d=t(86501),l=t(3374),u=function(){var e=(0,o.K)(function(e){return{isWalletDialogOpen:e.isWalletDialogOpen,setIsWalletDialogOpen:e.setIsWalletDialogOpen,walletPhone:e.walletPhone,setWalletPhone:e.setWalletPhone}},a.Z),n=e.isWalletDialogOpen,t=e.setWalletPhone,u=e.walletPhone,p=e.setIsWalletDialogOpen,m=function(){p(!1)},f=function(){if(11!==u.length||!(0,l.Xe)(u,"01")){d.ZP.error("برجاء ادخال رقم هاتف صحيح");return}m()};return(0,r.jsx)(c.V,{onClose:function(){return p(!1)},open:n,children:(0,r.jsxs)("div",{className:"fixed inset-0 z-10 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black opacity-50"}),(0,r.jsx)("div",{className:"relative bg-white rounded-lg h-3/4 lg:w-1/2 lg:h-1/2 ",children:(0,r.jsxs)("div",{className:"flex flex-col items-center max-w-xl p-10 mx-auto justify-center h-full",children:[(0,r.jsx)("h1",{className:"text-4xl font-bold mb-4 text-center",children:"الدفع عن طريق المحافظ الالكترونية"}),(0,r.jsx)("p",{children:"برجاء ادخال رقم هاتف المحفظة المكون من 11 رقم"}),(0,r.jsx)(i.I,{label:"رقم الهاتف",className:"w-full px-12",value:u,onChange:function(e){return t(e.target.value)}}),(0,r.jsx)(s.z,{label:"تأكيد",onClick:f,className:"mt-4"})]})})]})})}},38780:function(e,n,t){t.d(n,{J:function(){return y}});var r=t(85893),i=t(86010),o=t(5152),a=t.n(o),s=t(95172),c=t(36442),d=t(55327),l=t(3555),u=t(90760),p=t(72516),m=a()(function(){return t.e(5216).then(t.bind(t,95216)).then(function(e){return e.SphinxPackageIcon})},{loadableGenerated:{webpack:function(){return[95216]}}}),f=a()(function(){return t.e(6505).then(t.bind(t,66505)).then(function(e){return e.SphinxProductFormTitle})},{loadableGenerated:{webpack:function(){return[66505]}}}),h=a()(function(){return t.e(5208).then(t.bind(t,35208)).then(function(e){return e.CheckboxSphinx})},{loadableGenerated:{webpack:function(){return[35208]}}}),y=function(e){var n=e.isFunnel,t=(0,d.Fg)(function(e){return e.theme}),o=t===d.hN.luxify,a=t===d.hN.nue,y=t===d.hN.clear,b=t===d.hN.sphinx,x=t===d.hN.default,g=(0,d.U8)(),v=(0,p.j)(),k=(0,l.F)(),w=k.shippingOptions,j=k.selectedShippingOptionId,N=k.setSelectedShippingOptionId,_=k.setSelectedShippingOptionName,C=(0,c.$)();return(null==w?void 0:w.length)?(0,r.jsxs)("div",{className:"shipping_options_container mt-2",children:[b?(0,r.jsx)(f,{title:C("shipping-options"),icon:(0,r.jsx)(m,{className:"text-skin-primary w-5 h-5 md:w-6 md:h-6"}),className:"mt-5 md:mt-6"}):(0,r.jsx)("span",{className:(0,i.Z)("text-lg font-bold text-gray-700",{"block my-6 md:my-8":x}),children:C("shipping-options")}),(0,r.jsx)("div",{className:(0,i.Z)("shipping_options_container mt-2 flex flex-col space-y-2",{"mt-5 md:mt-6 space-y-3":b,"mt-4 md:mt-5 space-y-4 md:space-y-5":x}),children:w.map(function(e){return(0,r.jsxs)("button",{type:"button",className:(0,i.Z)("shipping_option_card flex cursor-pointer w-full items-center p-2 md:p-3 transition duration-300 ease-in-out ",{"border-black hover:border-black":j===e.id,"rounded-md border-2 ":!o&&!a,"rounded-2xl border-2  shadow-[4px_4px]  focus:shadow-[6px_6px] focus:shadow-[#87CEEB] focus:ring-black sm:text-sm":a,"shadow-[#87CEEB]":j===e.id&&a,"rounded-none border-[0.5px]":y,"rounded-xl border-2 ":o,"bg-white":n,"!border border-[#E2E2E2] !rounded-[14px] hover:!border-skin-primary":b,"!border-skin-primary":j===e.id&&b,"!border border-transparent !rounded-[14px] hover:!border-skin-primary bg-white":x,"!border !border-skin-primary":j===e.id&&x}),onClick:function(){N(e.id),_(e.name)},children:[b?(0,r.jsx)(h,{selected:j===e.id,className:"!w-5 !h-5 me-2 md:me-4"}):(0,r.jsx)("div",{className:(0,i.Z)("radio_container flex h-6 w-6 min-w-[24px] items-center justify-center rounded-full border border-gray-200 me-2",{"!border-skin-primary":j===e.id&&x}),children:(0,r.jsx)("div",{className:(0,i.Z)("radio_circle h-4 w-4 rounded-full bg-gray-200 transition-colors duration-300 ease-in-out",{"!bg-black":j===e.id&&!o&&!a&&!x,"!bg-[#87CEEB]":j===e.id&&a,"!bg-black/70":j===e.id&&o,"!bg-skin-primary/70":j===e.id&&y,"!bg-skin-primary h-3 w-3":j===e.id&&x})})}),(0,r.jsx)("div",{className:"flex w-full flex-col justify-center ",children:(0,r.jsxs)("div",{className:"shipping_option_card_content flex w-full flex-col",children:[(0,r.jsx)("span",{className:"shipping_option_card_name w-fit text-base font-bold text-gray-600",children:e.name}),(0,r.jsx)("span",{className:"shipping_option_card_description w-fit text-sm text-gray-500",children:e.description}),e.icon&&(0,r.jsx)("img",{src:e.icon,alt:e.name,className:"shipping_option_card_img h-10 w-full items-center object-contain me-2"})]})}),(0,r.jsxs)("div",{className:"shipping_option_card_price flex items-center gap-1 px-2",children:[e.price," ",(0,r.jsx)(u.X,{currency:v||g})]})]},e.id)})}),(0,r.jsx)(s.Z,{})]}):null}},7607:function(e,n,t){t.d(n,{D:function(){return j}});var r=t(26042),i=t(69396),o=t(85893),a=t(82820),s=t(27302),c=t(91002),d=t(36442),l=t(48439),u=t(38319),p=t(55327),m=t(36492),f=t(86010),h=t(67294),y=t(87536),b=t(63171),x=t(5152),g=t.n(x),v=t(72516),k=g()(function(){return t.e(938).then(t.bind(t,30938)).then(function(e){return e.LocationIconSphinx})},{loadableGenerated:{webpack:function(){return[30938]}}}),w=g()(function(){return t.e(1593).then(t.bind(t,41593)).then(function(e){return e.LocationIconElegance})},{loadableGenerated:{webpack:function(){return[41593]}}}),j=function(e){var n=e.register,t=e.control,x=e.formState.errors,g=e.isEcomboProduct,j=e.isTaagerProduct,N=e.isMosaweqProduct,_=e.isAlturkyProduct,C=e.isJamaykaProduct,O=e.isAngaznyProduct,E=e.isDropeProduct,Z=e.isTajercodProduct,F=(0,p.Fg)(function(e){return e.theme}),P=F===p.hN.nue,S=F===p.hN.sphinx,A=F===p.hN.luxify,I=F===p.hN.clear,M=F===p.hN.shine,D=F===p.hN.default,L=(0,d.$)(),W=(0,p.Fg)(function(e){return e.disable_auto_select_city}),R=(0,m.a)(["form-fields"],function(){return c.M.get("checkout-fields?sort=position,asc")},{retry:3}),T=R.data,q=R.isLoading,V=(0,p.Fg)(function(e){return e.id}),G=(0,m.a)(["taager-taagerCities"],a.m2,{refetchOnWindowFocus:!1,retry:!1,enabled:j}),z=G.data,H=G.isLoading,B=(0,m.a)(["ecombo-taagerCities"],a.Cs,{refetchOnWindowFocus:!1,retry:!1,enabled:g}),J=B.data,$=B.isLoading,U=(0,m.a)(["store-cities"],a.LJ,{refetchOnWindowFocus:!1,retry:!1}),K=U.data,Q=U.isLoading,X=(0,m.a)(["mosaweq-cities"],a.fg,{refetchOnWindowFocus:!1,retry:!1,enabled:N}),Y=X.data,ee=X.isLoading,en=(0,m.a)(["alturky-cities"],a.Uk,{refetchOnWindowFocus:!1,retry:!1,enabled:_}),et=en.data,er=en.isLoading,ei=(0,m.a)(["jamayka-cities"],a.P$,{refetchOnWindowFocus:!1,retry:!1,enabled:C}),eo=ei.data,ea=ei.isLoading,es=(0,m.a)(["angazny-cities",V],(0,a.gA)(V),{refetchOnWindowFocus:!1,retry:!1,enabled:O&&!!V}),ec=es.data,ed=es.isLoading,el=(0,m.a)(["drope-cities",V],(0,a.MT)(V),{refetchOnWindowFocus:!1,retry:!1,enabled:E&&!!V}),eu=el.data,ep=el.isLoading,em=(0,m.a)(["tajercod-cities"],a.aH,{refetchOnWindowFocus:!1,retry:!1,enabled:Z&&!!V}),ef=em.data,eh=em.isLoading,ey=(0,u.hA)(function(e){return e.updateAffiliateCities}),eb=(0,u.hA)(function(e){return e.setCity}),ex=(0,u.HE)(),eg=(0,u.HM)(),ev=(0,u.ff)(),ek=(0,u.JY)(),ew=(0,u.pv)(),ej=(0,u.MX)(),eN=(0,u.NI)(),e_=(0,u.Lb)(),eC=(0,u.mR)(),eO=(0,p.U8)(),eE=(0,v.j)()||eO,eZ=(0,p.Fg)(function(e){return e.lang}),eF="ar"===eZ;(0,h.useEffect)(function(){if(j&&z){ey("isTaagerCities",!0);return}if(O&&ec){ey("isAngaznyCities",!0);return}if(g&&J){ey("isEcomboCities",!0);return}if(N&&Y){ey("isMosaweqCities",!0);return}if(C&&eo){ey("isJamaykaCities",!0);return}if(_&&et){ey("isAlturkyCities",!0);return}if(E&&eu){ey("isDropeCities",!0);return}if(Z&&ef){ey("isTajercodCities",!0);return}if(K){ey("isStoreCities",!0);return}},[H,$,Q,ee,er,ea,ed,ep,eh,]),(0,h.useEffect)(function(){!W&&(Array.isArray(z)&&eb(z[0]),Array.isArray(J)&&eb(J[0]),Array.isArray(ec)&&eb(ec[0]),Array.isArray(eo)&&eb(eo[0]),Array.isArray(Y)&&eb(Y[0]),Array.isArray(et)&&eb(et[0]),Array.isArray(eu)&&eb(eu[0]),Array.isArray(ef)&&eb(ef[0]),Array.isArray(K)&&eb(K[0]))},[z,J,ec,eo,Y,et,eu,ef,K,W,]);var eP=function(){return ex&&z?z:eg&&J?J:eN&&ec?ec:ej&&eo?eo:ek&&Y?Y:ew&&et?et:e_&&eu?eu:eC&&ef?ef:ev&&K?K:[]};if(q)return(0,o.jsx)("div",{});var eS=function(e,n){return e&&n&&(null==n?void 0:n.length)>0};return(0,o.jsx)(o.Fragment,{children:null==T?void 0:T.data.map(function(e){if("government"===e.key&&(eS(eg,J)||eS(ex,z)||eS(ek,Y)||eS(ew,et)||eS(eN,ec)||eS(ej,eo)||eS(e_,eu)||eS(eC,ef)||eS(ev,K)))return(0,o.jsxs)("div",{className:(0,f.Z)("mt-3 mb-1",{"!mt-4 md:!mt-5 !mb-0":D}),children:[!S&&!D&&(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 ",children:e.name}),(0,o.jsx)(y.Qr,{name:"city",control:t,rules:{required:"".concat(L("please-select"),"  ").concat(e.name),validate:function(e){return!!e}},defaultValue:!W&&eP()[0],render:function(n){var t,a=n.field;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(b.ZP,{className:(0,f.Z)("gov_select basic-single z-20",{"rounded-md border-2 border-black shadow-[4px_4px] duration-300 ease-in-out focus:border-black focus:shadow-[6px_6px] focus:ring-black":P,"border-red-500 shadow-red-500 ring-red-500":!!x.city,"[&>div]:!py-1 md:[&>div]:!py-2 [&>div]:rounded-[14px] [&>div]:cursor-pointer":D}),classNamePrefix:"select",isRtl:eF,isSearchable:eP().length>60,name:e.name,options:eP(),getOptionLabel:function(e){return e.name},onChange:function(e){var n;return!!e&&(n=function(){eb(e),a.onChange(e)})()},getOptionValue:function(e){return e.id},value:a.value,placeholder:S||D?e.name:e.placeholder,styles:{control:function(e,n){var t=n.isFocused;return(0,r.Z)((0,i.Z)((0,r.Z)({},e),{border:x.city?"1px red solid":void 0}),A&&{borderRadius:"12px",borderColor:"#e9e9e9"},S&&{borderRadius:"14px",border:"1px solid ".concat(t?"rgb(var(--color-primary))":"#E2E2E2"),paddingTop:"8px",paddingBottom:"8px",paddingInlineStart:"2rem",boxShadow:"none","&:hover":{borderColor:t?"rgb(var(--color-primary))":"#E2E2E2"}},D&&{border:"1px solid ".concat(t?"rgb(var(--color-primary))":"transparent"),boxShadow:"none",paddingInlineStart:"2.3rem","&:hover":{borderColor:t?"rgb(var(--color-primary))":"#E2E2E2"}},I&&{borderRadius:"0px",borderColor:"#e9e9e9"},M&&{borderRadius:"4px",borderColor:"#e9e9e9"})},option:function(e,n){var t=n.isSelected,i=n.isFocused;return(0,r.Z)({},e,(S||D)&&{backgroundColor:t?"rgb(var(--color-primary))":i?"rgba(var(--color-primary), 0.1)":"white",color:t?"rgb(var(--color-a11y))":"#000",cursor:"pointer"})}}}),S&&(0,o.jsx)("div",{className:(0,f.Z)("pointer-events-none absolute z-20 inset-y-0 flex items-center ps-3",{"right-0":"ar"===eZ,"left-0":"ar"!==eZ}),children:(0,o.jsx)(k,{className:"h-5 w-5 text-[#778399]"})}),D&&(0,o.jsx)("div",{className:(0,f.Z)("pointer-events-none absolute z-20 inset-y-0 flex items-center ps-3",{"right-1":"ar"===eZ,"left-1":"ar"!==eZ}),children:(0,o.jsx)(w,{className:"h-5 w-5 text-[#61758A]"})})]}),!!x.city&&(0,o.jsx)("p",{className:"mt-1 text-sm text-red-600",id:"city-error",children:(null===(t=x.city)||void 0===t?void 0:t.message)||""})]})}})]},e.name);if(e.is_active){var a;return"government"===e.key&&(eg||ex||ek)?null:(0,o.jsx)("div",{className:(0,f.Z)("mt-3",{"!mt-4 md:!mt-5 [&_input]:!border-transparent [&_textarea]:!border-transparent":D}),children:(0,o.jsx)(s.I,(0,i.Z)((0,r.Z)({label:e.name,placeholder:e.placeholder,isError:!!x[e.key],errorMessage:(null===(a=x[e.key])||void 0===a?void 0:a.message)||"",fieldKey:e.key},n(e.key,(0,r.Z)({required:!!e.is_required&&L("this-field-is-required"),validate:e.is_required?function(e){return!!e.trim()}:void 0,minLength:(0,l.Mw)(e.key,eE,L("this-field-must-have-at-least"),L("numbers"),L("characters"))},"sa_national_address"===e.key&&(null==e?void 0:e.is_required)&&{pattern:{value:/^[A-Z]{4}[0-9]{4}$/,message:L("invalid-national-address-format")}}))),{textArea:"address"===e.key||"note"===e.key,tel:"phone"===e.key||"phone_alt"===e.key,style:{direction:"inherit"}}))},e.key)}})})}},49129:function(e,n,t){t.d(n,{Q:function(){return y}});var r=t(26042),i=t(69396),o=t(85893),a=t(11355),s=t(15116),c=t(67294),d=t(58386),l=t(93181),u=function(e,n){var t=(0,c.useRef)(null);(0,c.useEffect)(function(){t.current=e},[e]),(0,c.useEffect)(function(){var e=function(){t.current&&t.current()};if(null!==n){var r=setInterval(e,n);return function(){return clearInterval(r)}}},[n])},p=t(63549),m=t(36442),f=t(76248),h=t(31415),y=function(e){var n=e.onVerifyFailed,t=(0,m.$)(),y=(0,p.N)(function(e){return e},f.Z),b=y.otp,x=y.setOtp,g=y.isOtpModalOpen,v=y.closeOtpModal,k=y.phoneNumberThatReceivedOtp,w=y.verifyOtp,j=y.isOtpHasError,N=y.reSendOtpRequest,_=y.isVerifyingOtp,C=function(){v(),n()},O=(0,c.useState)({countDown:60,isCounting:!0}),E=O[0],Z=O[1];return u(function(){Z(function(e){return 0===e.countDown?{countDown:0,isCounting:!1}:{countDown:e.countDown-1,isCounting:!0}})},g&&E.isCounting?1e3:null),(0,o.jsx)(a.u,{appear:!0,show:g,as:c.Fragment,children:(0,o.jsxs)(s.V,{as:"div",className:"relative z-[999]",onClose:function(){return null},children:[(0,o.jsx)(a.u.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-600",leave:"ease-in duration-200",leaveFrom:"opacity-600",leaveTo:"opacity-0",children:(0,o.jsx)("div",{className:"fixed inset-0 bg-black/25"})}),(0,o.jsx)("div",{className:"fixed inset-0 overflow-y-auto",children:(0,o.jsx)("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:(0,o.jsx)(a.u.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-600 scale-600",leave:"ease-in duration-200",leaveFrom:"opacity-600 scale-600",leaveTo:"opacity-0 scale-95",children:(0,o.jsxs)(s.V.Panel,{className:"relative w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 align-middle shadow-xl transition-all",children:[(0,o.jsxs)("button",{onClick:C,className:"flex",children:[(0,o.jsx)(h.Z,{className:"w-6 h-6"}),(0,o.jsx)("span",{className:"sr-only",children:t("cancel")})]}),(0,o.jsxs)(s.V.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900",children:[t("otp-has-been-sent-to")," ",k]}),(0,o.jsx)(s.V.Description,{className:"mt-2 text-sm text-gray-500",children:t("confirm-your-number-to-confirm-order")}),(0,o.jsx)(d.Z,{value:b,inputType:"number",onChange:function(e){x(e),4===e.length&&w(e,n)},numInputs:4,containerStyle:{display:"flex",justifyContent:"center",margin:"2rem 0 0",direction:"ltr"},renderSeparator:(0,o.jsx)("span",{children:"-"}),renderInput:function(e){return(0,o.jsx)("input",(0,i.Z)((0,r.Z)({},e),{disabled:_,className:"[appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none text-4xl rounded-md border p-1.5 my-0 mx-2 focus:outline-none focus:ring-2 focus:ring-skin-primary focus:border-transparent w-12 text-center"}))},shouldAutoFocus:!0}),j&&(0,o.jsx)("p",{className:"text-red-500 text-sm mt-2",children:t("invalid-otp")}),(0,o.jsx)("div",{className:"mt-5 flex justify-center items-center gap-2",children:E.isCounting?(0,o.jsxs)("p",{className:"text-sm text-gray-500",children:[t("you-can-resend-otp-in")," ",E.countDown," ",t("seconds")]}):(0,o.jsx)("button",{onClick:function(){Z({countDown:60,isCounting:!0}),N({limitExceeded:t("otp-limit-exceeded"),blockedPhone:t("blocked-number")})},disabled:E.isCounting,className:"text-sm text-gray-500",children:t("resend-otp")})}),_&&(0,o.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center",children:(0,o.jsx)(l.frZ,{className:"w-60 h-60 animate-spin"})}),(0,o.jsxs)("div",{className:"mt-3 text-gray-500",children:[t("entered-wrong-number")," ",(0,o.jsx)("button",{className:"text-black",onClick:C,children:t("start-again")})]})]})})})})]})})}},21617:function(e,n,t){t.d(n,{o:function(){return m}});var r=t(77675),i=t(30108),o=t(47568),a=t(20414),s=t(36492),c=t(9669),d=t.n(c),l=function(){var e=(0,s.a)(["visitorCountry"],(0,o.Z)(function(){var e,n,t,r;return(0,a.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,d().get("https://cloudflare.com/cdn-cgi/trace")];case 1:if("on"===(r=Object.fromEntries((0,e.sent().data).trim().split("\n").map(function(e){return e.split("=")}))).warp)return[2,"us"];if(r.loc)return[2,r.loc.toLowerCase()];return[2,"unknown"];case 2:return e.sent(),[2,"unknown"];case 3:return[2]}})})),n=e.data;return{isLoading:e.isLoading,countryCode:n}},u=t(55327),p=t(8982),m=function(e){var n,t=(0,r.p)(i.A.VpnBlock).isError,o=l(),a=o.countryCode,s=o.isLoading,c=(0,u.U8)();return!s&&!t&&"unknown"!==a&&a!==(null===(n=p.r[e||c])||void 0===n?void 0:n.toLowerCase())}},89667:function(e,n,t){t.d(n,{E:function(){return o}});var r=t(65369),i=t(36492),o=function(e){var n=(0,i.a)(["isConfirmOrderWithOtpActive"],function(){return r.N.get("/otp/store/".concat(e,"/is-active"))},{enabled:!!e}),t=n.isError;return{isConfirmOrderWithOtpActive:!n.isLoading&&!t}}},41777:function(e,n,t){t.d(n,{S:function(){return o}});var r=t(64529),i=t(782),o=(0,r.ZP)()((0,i.tJ)(function(e){return{isCheckoutFormDirty:!1,setIsCheckoutFormDirty:function(n){e({isCheckoutFormDirty:n})},resetCheckoutFormInteraction:function(){e({isCheckoutFormDirty:!1})}}},{name:"checkout-form-interaction",getStorage:function(){return sessionStorage}}))},63549:function(e,n,t){t.d(n,{N:function(){return s}});var r=t(47568),i=t(20414),o=t(65369),a=t(86501),s=(0,t(64529).ZP)(function(e,n){var t,s;return{otp:"",phoneNumberThatReceivedOtp:"",storeId:"",countryCode:"",isOtpModalOpen:!1,isOtpSuccess:!1,isVerifyingOtp:!1,isOtpHasError:!1,setOtp:function(n){return e({otp:n})},openOtpModal:function(){return e({isOtpModalOpen:!0})},closeOtpModal:function(){return e({isOtpModalOpen:!1})},setIsOtpSuccess:function(n){return e({isOtpSuccess:n})},sendOtpRequest:(t=(0,r.Z)(function(t,r,s,c){var d,l,u,p;return(0,i.__generator)(this,function(i){switch(i.label){case 0:e({phoneNumberThatReceivedOtp:t,storeId:s,countryCode:r}),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,o.N.post("/otp/send",{country_code:r,phone:t,store_id:s})];case 2:return i.sent(),n().openOtpModal(),[3,4];case 3:return(null===(l=(d=i.sent()).response)||void 0===l?void 0:l.status)===429&&a.ZP.error(c.limitExceeded),(null===(u=d.response)||void 0===u?void 0:u.status)===400&&e({isOtpSuccess:!0}),(null===(p=d.response)||void 0===p?void 0:p.status)===403&&a.ZP.error(c.blockedPhone),[3,4];case 4:return[2]}})}),function(e,n,r,i){return t.apply(this,arguments)}),reSendOtpRequest:function(t){e({isOtpHasError:!1,otp:""});var r=n(),i=r.phoneNumberThatReceivedOtp,o=r.storeId,a=r.countryCode;n().sendOtpRequest(i,a,o,t)},verifyOtp:(s=(0,r.Z)(function(t,r){var a,s,c;return(0,i.__generator)(this,function(i){switch(i.label){case 0:e({isOtpHasError:!1}),s=(a=n()).phoneNumberThatReceivedOtp,c=a.storeId,i.label=1;case 1:return i.trys.push([1,3,4,5]),e({isVerifyingOtp:!0}),[4,o.N.post("/otp/validate",{code:t,phone:s,store_id:c})];case 2:return i.sent(),n().closeOtpModal(),e({isOtpSuccess:!0}),[3,5];case 3:return i.sent(),e({isOtpHasError:!0,otp:""}),r(),[3,5];case 4:return e({isVerifyingOtp:!1}),[7];case 5:return[2]}})}),function(e,n){return s.apply(this,arguments)})}})},67819:function(e,n,t){t.d(n,{g:function(){return i}});var r=t(91002);function i(e){return r.M.post("/logs",e)}},48439:function(e,n,t){t.d(n,{Mw:function(){return i},oN:function(){return r}});var r=function(e){return["ج.م","EGP"].includes(e)?11:["SAR","AED","IQD"].includes(e)?10:1},i=function(e,n,t,i,o){var a,s,c,d,l,u={address:3,country:0,email:5,full_name:3,government:3,phone:r(n),phone_alt:r(n),note:0};return u[e]?{value:u[e],message:(a=u[e],s=e,c=t,d=i,l=o,"".concat(c," ").concat(a," ").concat("phone"===s?d:l))}:0}}}]);